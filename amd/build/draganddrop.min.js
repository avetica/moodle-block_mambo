define(["jquery","jqueryui","core/yui"],function(a,b){var c={courseid:0,ajaxurl:"",sesskey:"",blockid:0},d=function(a){try{console.log(a)}catch(b){}},e={init:function(){a("#mambo_activities li").draggable({cursor:"move",revert:"invalid",containment:"document",helper:"clone"}),a("#mambo_behaviours ul > li").droppable({classes:{"ui-droppable-active":"ui-state-highlight"},drop:function(b,e){var f=a(this),g=e.draggable,h=g.data("id"),i=f.data("id");d("Drop: "+h+"|"+i),a.ajax({url:c.ajaxurl,method:"POST",data:{sesskey:c.sesskey,courseid:c.courseid,blockid:c.blockid,action:"add",verb:i,coursemoduleid:h},dataType:"json"}).done(function(a){a.status?f.find("ul").append(g.clone()):a.error&&alert(a.error)}).fail(function(a,b){d("Request failed: "+b)})}}),a("#region-main").on("click","#mambo_behaviours ul li ul li",function(){var b=a(this);a.ajax({url:c.ajaxurl,method:"POST",data:{sesskey:c.sesskey,courseid:c.courseid,blockid:c.blockid,action:"delete",verb:"holder",coursemoduleid:a(this).data("id")},dataType:"json"}).done(function(a){a.status?b.remove():a.error&&alert(a.error)}).fail(function(a,b){d("Request failed: "+b)})})}};return{initialise:function(b){c.courseid=b.courseid,c.ajaxurl=b.ajaxurl,c.sesskey=b.sesskey,c.blockid=b.blockid,a(document).ready(function(){d("INIT AMD: M.block_mambo "),e.init()})}}});